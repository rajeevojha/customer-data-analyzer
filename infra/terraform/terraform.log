2025-03-14T21:22:43.202-0700 [INFO]  Terraform version: 1.11.2
2025-03-14T21:22:43.203-0700 [DEBUG] using github.com/hashicorp/go-tfe v1.70.0
2025-03-14T21:22:43.203-0700 [DEBUG] using github.com/hashicorp/hcl/v2 v2.23.0
2025-03-14T21:22:43.203-0700 [DEBUG] using github.com/hashicorp/terraform-svchost v0.1.1
2025-03-14T21:22:43.203-0700 [DEBUG] using github.com/zclconf/go-cty v1.16.0
2025-03-14T21:22:43.203-0700 [INFO]  Go runtime version: go1.23.3
2025-03-14T21:22:43.203-0700 [INFO]  CLI args: []string{"terraform", "apply", "-var", "my_ip=172.56.86.86", "-auto-approve"}
2025-03-14T21:22:43.203-0700 [DEBUG] Attempting to open CLI config file: /home/rajeev/.terraformrc
2025-03-14T21:22:43.203-0700 [DEBUG] File doesn't exist, but doesn't need to. Ignoring.
2025-03-14T21:22:43.203-0700 [DEBUG] ignoring non-existing provider search directory terraform.d/plugins
2025-03-14T21:22:43.203-0700 [DEBUG] ignoring non-existing provider search directory /home/rajeev/.terraform.d/plugins
2025-03-14T21:22:43.203-0700 [DEBUG] ignoring non-existing provider search directory /home/rajeev/.local/share/terraform/plugins
2025-03-14T21:22:43.204-0700 [DEBUG] ignoring non-existing provider search directory /usr/local/share/terraform/plugins
2025-03-14T21:22:43.204-0700 [DEBUG] ignoring non-existing provider search directory /usr/share/terraform/plugins
2025-03-14T21:22:43.204-0700 [DEBUG] ignoring non-existing provider search directory /var/lib/snapd/desktop/terraform/plugins
2025-03-14T21:22:43.206-0700 [INFO]  CLI command args: []string{"apply", "-var", "my_ip=172.56.86.86", "-auto-approve"}
2025-03-14T21:23:03.707-0700 [DEBUG] checking for provisioner in "."
2025-03-14T21:23:03.713-0700 [DEBUG] checking for provisioner in "/usr/bin"
2025-03-14T21:23:03.718-0700 [INFO]  backend/local: starting Apply operation
2025-03-14T21:23:03.725-0700 [DEBUG] created provider logger: level=debug
2025-03-14T21:23:03.725-0700 [INFO]  provider: configuring client automatic mTLS
2025-03-14T21:23:03.742-0700 [DEBUG] provider: starting plugin: path=.terraform/providers/registry.terraform.io/hashicorp/aws/5.91.0/linux_amd64/terraform-provider-aws_v5.91.0_x5 args=[".terraform/providers/registry.terraform.io/hashicorp/aws/5.91.0/linux_amd64/terraform-provider-aws_v5.91.0_x5"]
2025-03-14T21:23:03.743-0700 [DEBUG] provider: plugin started: path=.terraform/providers/registry.terraform.io/hashicorp/aws/5.91.0/linux_amd64/terraform-provider-aws_v5.91.0_x5 pid=99933
2025-03-14T21:23:03.743-0700 [DEBUG] provider: waiting for RPC address: plugin=.terraform/providers/registry.terraform.io/hashicorp/aws/5.91.0/linux_amd64/terraform-provider-aws_v5.91.0_x5
2025-03-14T21:23:03.863-0700 [DEBUG] provider.terraform-provider-aws_v5.91.0_x5: Starting github.com/hashicorp/terraform-provider-aws@5.91.0 (go1.23.7)...
2025-03-14T21:23:03.863-0700 [DEBUG] provider.terraform-provider-aws_v5.91.0_x5: Initializing Terraform AWS Provider...
2025-03-14T21:23:03.897-0700 [INFO]  provider.terraform-provider-aws_v5.91.0_x5: configuring server automatic mTLS: timestamp=2025-03-14T21:23:03.896-0700
2025-03-14T21:23:03.906-0700 [DEBUG] provider: using plugin: version=5
2025-03-14T21:23:03.907-0700 [DEBUG] provider.terraform-provider-aws_v5.91.0_x5: plugin address: address=/tmp/plugin1303282381 network=unix timestamp=2025-03-14T21:23:03.906-0700
2025-03-14T21:23:04.880-0700 [DEBUG] provider.stdio: received EOF, stopping recv loop: err="rpc error: code = Unavailable desc = error reading from server: EOF"
2025-03-14T21:23:04.894-0700 [INFO]  provider: plugin process exited: plugin=.terraform/providers/registry.terraform.io/hashicorp/aws/5.91.0/linux_amd64/terraform-provider-aws_v5.91.0_x5 id=99933
2025-03-14T21:23:04.898-0700 [DEBUG] provider: plugin exited
2025-03-14T21:23:04.898-0700 [DEBUG] created provider logger: level=debug
2025-03-14T21:23:04.898-0700 [INFO]  provider: configuring client automatic mTLS
2025-03-14T21:23:04.902-0700 [DEBUG] provider: starting plugin: path=.terraform/providers/registry.terraform.io/hashicorp/google/6.25.0/linux_amd64/terraform-provider-google_v6.25.0_x5 args=[".terraform/providers/registry.terraform.io/hashicorp/google/6.25.0/linux_amd64/terraform-provider-google_v6.25.0_x5"]
2025-03-14T21:23:04.903-0700 [DEBUG] provider: plugin started: path=.terraform/providers/registry.terraform.io/hashicorp/google/6.25.0/linux_amd64/terraform-provider-google_v6.25.0_x5 pid=99960
2025-03-14T21:23:04.903-0700 [DEBUG] provider: waiting for RPC address: plugin=.terraform/providers/registry.terraform.io/hashicorp/google/6.25.0/linux_amd64/terraform-provider-google_v6.25.0_x5
2025-03-14T21:23:04.945-0700 [INFO]  provider.terraform-provider-google_v6.25.0_x5: configuring server automatic mTLS: timestamp=2025-03-14T21:23:04.945-0700
2025-03-14T21:23:04.955-0700 [DEBUG] provider: using plugin: version=5
2025-03-14T21:23:04.955-0700 [DEBUG] provider.terraform-provider-google_v6.25.0_x5: plugin address: address=/tmp/plugin2495588031 network=unix timestamp=2025-03-14T21:23:04.954-0700
2025-03-14T21:23:05.128-0700 [DEBUG] provider.stdio: received EOF, stopping recv loop: err="rpc error: code = Unavailable desc = error reading from server: EOF"
2025-03-14T21:23:05.135-0700 [INFO]  provider: plugin process exited: plugin=.terraform/providers/registry.terraform.io/hashicorp/google/6.25.0/linux_amd64/terraform-provider-google_v6.25.0_x5 id=99960
2025-03-14T21:23:05.139-0700 [DEBUG] provider: plugin exited
2025-03-14T21:23:05.141-0700 [DEBUG] Building and walking validate graph
2025-03-14T21:23:05.143-0700 [DEBUG] ProviderTransformer: "google_compute_network.vpc" (*terraform.NodeValidatableResource) needs provider["registry.terraform.io/hashicorp/google"]
2025-03-14T21:23:05.143-0700 [DEBUG] ProviderTransformer: "google_service_account.vm_access" (*terraform.NodeValidatableResource) needs provider["registry.terraform.io/hashicorp/google"]
2025-03-14T21:23:05.143-0700 [DEBUG] ProviderTransformer: "aws_iam_instance_profile.ec2_profile" (*terraform.NodeValidatableResource) needs provider["registry.terraform.io/hashicorp/aws"]
2025-03-14T21:23:05.143-0700 [DEBUG] ProviderTransformer: "aws_instance.app" (*terraform.NodeValidatableResource) needs provider["registry.terraform.io/hashicorp/aws"]
2025-03-14T21:23:05.143-0700 [DEBUG] ProviderTransformer: "google_compute_instance.app" (*terraform.NodeValidatableResource) needs provider["registry.terraform.io/hashicorp/google"]
2025-03-14T21:23:05.143-0700 [DEBUG] ProviderTransformer: "aws_security_group.app_sg" (*terraform.NodeValidatableResource) needs provider["registry.terraform.io/hashicorp/aws"]
2025-03-14T21:23:05.143-0700 [DEBUG] ProviderTransformer: "aws_iam_policy.ec2_policy" (*terraform.NodeValidatableResource) needs provider["registry.terraform.io/hashicorp/aws"]
2025-03-14T21:23:05.144-0700 [DEBUG] ProviderTransformer: "aws_iam_role_policy_attachment.ec2_policy_attach" (*terraform.NodeValidatableResource) needs provider["registry.terraform.io/hashicorp/aws"]
2025-03-14T21:23:05.144-0700 [DEBUG] ProviderTransformer: "google_compute_firewall.ssh" (*terraform.NodeValidatableResource) needs provider["registry.terraform.io/hashicorp/google"]
2025-03-14T21:23:05.144-0700 [DEBUG] ProviderTransformer: "aws_iam_role.ec2_role" (*terraform.NodeValidatableResource) needs provider["registry.terraform.io/hashicorp/aws"]
2025-03-14T21:23:05.144-0700 [DEBUG] ProviderTransformer: "google_project_iam_member.storage_viewer" (*terraform.NodeValidatableResource) needs provider["registry.terraform.io/hashicorp/google"]
2025-03-14T21:23:05.144-0700 [DEBUG] ProviderTransformer: "google_compute_subnetwork.subnet" (*terraform.NodeValidatableResource) needs provider["registry.terraform.io/hashicorp/google"]
2025-03-14T21:23:05.144-0700 [DEBUG] ReferenceTransformer: "google_compute_firewall.ssh" references: [var.my_ip]
2025-03-14T21:23:05.144-0700 [DEBUG] ReferenceTransformer: "aws_iam_role.ec2_role" references: []
2025-03-14T21:23:05.144-0700 [DEBUG] ReferenceTransformer: "output.aws_ec2_ip (expand)" references: [aws_instance.app]
2025-03-14T21:23:05.145-0700 [DEBUG] ReferenceTransformer: "provider[\"registry.terraform.io/hashicorp/google\"]" references: []
2025-03-14T21:23:05.145-0700 [DEBUG] ReferenceTransformer: "aws_iam_role_policy_attachment.ec2_policy_attach" references: [aws_iam_role.ec2_role aws_iam_policy.ec2_policy]
2025-03-14T21:23:05.145-0700 [DEBUG] ReferenceTransformer: "google_compute_network.vpc" references: []
2025-03-14T21:23:05.145-0700 [DEBUG] ReferenceTransformer: "google_service_account.vm_access" references: []
2025-03-14T21:23:05.145-0700 [DEBUG] ReferenceTransformer: "var.redis_host" references: []
2025-03-14T21:23:05.145-0700 [DEBUG] ReferenceTransformer: "local.envs (expand)" references: []
2025-03-14T21:23:05.145-0700 [DEBUG] ReferenceTransformer: "google_project_iam_member.storage_viewer" references: [google_service_account.vm_access]
2025-03-14T21:23:05.145-0700 [DEBUG] ReferenceTransformer: "aws_iam_instance_profile.ec2_profile" references: [aws_iam_role.ec2_role]
2025-03-14T21:23:05.145-0700 [DEBUG] ReferenceTransformer: "var.my_ip" references: []
2025-03-14T21:23:05.145-0700 [DEBUG] ReferenceTransformer: "output.rollcall (expand)" references: []
2025-03-14T21:23:05.145-0700 [DEBUG] ReferenceTransformer: "output.gcp_public_ip (expand)" references: [google_compute_instance.app]
2025-03-14T21:23:05.145-0700 [DEBUG] ReferenceTransformer: "provider[\"registry.terraform.io/hashicorp/aws\"]" references: []
2025-03-14T21:23:05.145-0700 [DEBUG] ReferenceTransformer: "google_compute_subnetwork.subnet" references: [google_compute_network.vpc]
2025-03-14T21:23:05.146-0700 [DEBUG] ReferenceTransformer: "google_compute_instance.app" references: [local.envs (expand) google_service_account.vm_access]
2025-03-14T21:23:05.146-0700 [DEBUG] ReferenceTransformer: "var.redis_password" references: []
2025-03-14T21:23:05.146-0700 [DEBUG] ReferenceTransformer: "aws_security_group.app_sg" references: [var.my_ip var.my_ip]
2025-03-14T21:23:05.146-0700 [DEBUG] ReferenceTransformer: "aws_iam_policy.ec2_policy" references: []
2025-03-14T21:23:05.146-0700 [DEBUG] ReferenceTransformer: "aws_instance.app" references: [local.envs (expand) aws_iam_instance_profile.ec2_profile aws_security_group.app_sg]
2025-03-14T21:23:05.147-0700 [DEBUG] Starting graph walk: walkValidate
2025-03-14T21:23:05.151-0700 [ERROR] vertex "output.rollcall" error: Invalid reference
2025-03-14T21:23:05.151-0700 [ERROR] vertex "output.rollcall" error: Reference to undeclared local value
2025-03-14T21:23:05.151-0700 [ERROR] vertex "output.rollcall (expand)" error: Invalid reference
2025-03-14T21:23:05.151-0700 [ERROR] vertex "output.rollcall (expand)" error: Reference to undeclared local value
2025-03-14T21:23:05.152-0700 [DEBUG] created provider logger: level=debug
2025-03-14T21:23:05.152-0700 [INFO]  provider: configuring client automatic mTLS
2025-03-14T21:23:05.157-0700 [DEBUG] provider: starting plugin: path=.terraform/providers/registry.terraform.io/hashicorp/google/6.25.0/linux_amd64/terraform-provider-google_v6.25.0_x5 args=[".terraform/providers/registry.terraform.io/hashicorp/google/6.25.0/linux_amd64/terraform-provider-google_v6.25.0_x5"]
2025-03-14T21:23:05.157-0700 [DEBUG] provider: plugin started: path=.terraform/providers/registry.terraform.io/hashicorp/google/6.25.0/linux_amd64/terraform-provider-google_v6.25.0_x5 pid=99981
2025-03-14T21:23:05.157-0700 [DEBUG] provider: waiting for RPC address: plugin=.terraform/providers/registry.terraform.io/hashicorp/google/6.25.0/linux_amd64/terraform-provider-google_v6.25.0_x5
2025-03-14T21:23:05.194-0700 [INFO]  provider.terraform-provider-google_v6.25.0_x5: configuring server automatic mTLS: timestamp=2025-03-14T21:23:05.194-0700
2025-03-14T21:23:05.204-0700 [DEBUG] provider: using plugin: version=5
2025-03-14T21:23:05.204-0700 [DEBUG] provider.terraform-provider-google_v6.25.0_x5: plugin address: address=/tmp/plugin3388226666 network=unix timestamp=2025-03-14T21:23:05.204-0700
2025-03-14T21:23:05.212-0700 [DEBUG] created provider logger: level=debug
2025-03-14T21:23:05.212-0700 [INFO]  provider: configuring client automatic mTLS
2025-03-14T21:23:05.217-0700 [DEBUG] provider: starting plugin: path=.terraform/providers/registry.terraform.io/hashicorp/aws/5.91.0/linux_amd64/terraform-provider-aws_v5.91.0_x5 args=[".terraform/providers/registry.terraform.io/hashicorp/aws/5.91.0/linux_amd64/terraform-provider-aws_v5.91.0_x5"]
2025-03-14T21:23:05.217-0700 [DEBUG] provider: plugin started: path=.terraform/providers/registry.terraform.io/hashicorp/aws/5.91.0/linux_amd64/terraform-provider-aws_v5.91.0_x5 pid=99997
2025-03-14T21:23:05.217-0700 [DEBUG] provider: waiting for RPC address: plugin=.terraform/providers/registry.terraform.io/hashicorp/aws/5.91.0/linux_amd64/terraform-provider-aws_v5.91.0_x5
2025-03-14T21:23:05.310-0700 [DEBUG] provider.terraform-provider-aws_v5.91.0_x5: Starting github.com/hashicorp/terraform-provider-aws@5.91.0 (go1.23.7)...
2025-03-14T21:23:05.310-0700 [DEBUG] provider.terraform-provider-aws_v5.91.0_x5: Initializing Terraform AWS Provider...
2025-03-14T21:23:05.336-0700 [INFO]  provider.terraform-provider-aws_v5.91.0_x5: configuring server automatic mTLS: timestamp=2025-03-14T21:23:05.336-0700
2025-03-14T21:23:05.346-0700 [DEBUG] provider.terraform-provider-aws_v5.91.0_x5: plugin address: address=/tmp/plugin2695158710 network=unix timestamp=2025-03-14T21:23:05.346-0700
2025-03-14T21:23:05.346-0700 [DEBUG] provider: using plugin: version=5
2025-03-14T21:23:05.363-0700 [DEBUG] provider.stdio: received EOF, stopping recv loop: err="rpc error: code = Unavailable desc = error reading from server: EOF"
2025-03-14T21:23:05.368-0700 [INFO]  provider: plugin process exited: plugin=.terraform/providers/registry.terraform.io/hashicorp/google/6.25.0/linux_amd64/terraform-provider-google_v6.25.0_x5 id=99981
2025-03-14T21:23:05.371-0700 [DEBUG] provider: plugin exited
2025-03-14T21:23:05.458-0700 [DEBUG] provider.stdio: received EOF, stopping recv loop: err="rpc error: code = Unavailable desc = error reading from server: EOF"
2025-03-14T21:23:05.466-0700 [INFO]  provider: plugin process exited: plugin=.terraform/providers/registry.terraform.io/hashicorp/aws/5.91.0/linux_amd64/terraform-provider-aws_v5.91.0_x5 id=99997
2025-03-14T21:23:05.470-0700 [DEBUG] provider: plugin exited
[31m╷[0m[0m
[31m│[0m [0m[1m[31mError: [0m[0m[1mReference to undeclared local value[0m
[31m│[0m [0m
[31m│[0m [0m[0m  on  line 0:
[31m│[0m [0m  (source code not available)
[31m│[0m [0m
[31m│[0m [0mA local value with the name "" has not been declared.
[31m╵[0m[0m
[31m╷[0m[0m
[31m│[0m [0m[1m[31mError: [0m[0m[1mInvalid reference[0m
[31m│[0m [0m
[31m│[0m [0m[0m  on main.tf line 17, in output "rollcall":
[31m│[0m [0m  17:   value = local[4m["REDIS_HOST"][0m[0m
[31m│[0m [0m
[31m│[0m [0mThe "local" object does not support this operation.
[31m╵[0m[0m
